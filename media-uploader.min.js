var file_frame;jQuery(document).ready(function(){if(jQuery("[id*='_url']").val()==""){jQuery("#upload").show();jQuery("#preview").hide();jQuery("#remove").hide()}else{jQuery("#upload").hide();jQuery("#preview").show();jQuery("#remove").show()}jQuery(".upload-button").on("click",function(e){e.preventDefault();if(file_frame){file_frame.open();return}file_frame=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:false});file_frame.on("select",function(){img=file_frame.state().get("selection").first();jQuery("[id$='_url']").val(img.attributes.url);jQuery("#preview>img").attr("src",img.attributes.url);jQuery("#upload").hide();jQuery("#preview").show();jQuery("#remove").show()});file_frame.open()});jQuery(".remove-button").on("click",function(){jQuery("[id$='_url']").val("");jQuery("#upload").show();jQuery("#preview>img").attr("src","");jQuery("#preview").hide();jQuery("#remove").hide()})})